*** Begin Patch
*** Update File: .github/workflows/ci.yml
@@ jobs:
   test:
@@
-       - name: Lint
-        run: npm run lint --if-present
-        env:
-          CI: true
-       - name: Unit and integration tests
-        run: npm test --if-present
-        env:
-          CI: true
-       - name: Cypress end-to-end tests
-        run: npm run e2e:ci --if-present
-        env:
-          CI: true
+       # Run linter and unit/integration tests before e2e tests
+       - name: Lint
+        run: npm run lint --if-present
+        env:
+          CI: true
+       - name: Unit and integration tests
+        run: npm test --if-present
+        env:
+          CI: true
+       # Build the Vite application
+       - name: Build Vite app
+        run: npm run build
+        env:
+          CI: true
+       # Start a local preview server on port 5173 in the background
+       - name: Start preview server
+        run: npm run preview -- --port 5173 &
+        env:
+          NODE_ENV: production
+       # Wait for the preview server to be accessible before running Cypress
+       - name: Wait for server to be ready
+        run: npx --yes wait-on http://localhost:5173
+       # Run Cypress end‑to‑end tests and fail if they are missing
+       - name: Cypress end-to-end tests
+        run: npm run e2e:ci
+        env:
+          CI: true
*** End Patch
